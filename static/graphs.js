state_gender = {"WA": {"male": 31, "female": 14}, "DE": {"male": 28, "female": 8}, "DC": {"male": 3, "female": 1}, "WI": {"male": 55, "female": 26}, "WV": {"male": 15, "female": 4}, "HI": {"male": 2, "female": 0}, "FL": {"male": 88, "female": 28}, "WY": {"male": 4, "female": 0}, "NH": {"male": 4, "female": 3}, "NJ": {"male": 66, "female": 21}, "NM": {"male": 11, "female": 3}, "TX": {"male": 93, "female": 45}, "LA": {"male": 27, "female": 19}, "NC": {"male": 53, "female": 25}, "ND": {"male": 2, "female": 1}, "NE": {"male": 8, "female": 4}, "TN": {"male": 39, "female": 14}, "NY": {"male": 75, "female": 22}, "PA": {"male": 143, "female": 57}, "CA": {"male": 180, "female": 74}, "NV": {"male": 12, "female": 3}, "VA": {"male": 45, "female": 20}, "CO": {"male": 102, "female": 21}, "AK": {"male": 12, "female": 2}, "AL": {"male": 40, "female": 13}, "AR": {"male": 20, "female": 8}, "VT": {"male": 4, "female": 1}, "IL": {"male": 87, "female": 45}, "GA": {"male": 37, "female": 20}, "IN": {"male": 40, "female": 19}, "IA": {"male": 17, "female": 10}, "OK": {"male": 22, "female": 12}, "AZ": {"male": 19, "female": 20}, "ID": {"male": 4, "female": 0}, "CT": {"male": 18, "female": 7}, "ME": {"male": 5, "female": 4}, "MD": {"male": 42, "female": 21}, "MA": {"male": 29, "female": 8}, "OH": {"male": 73, "female": 30}, "UT": {"male": 14, "female": 6}, "MO": {"male": 31, "female": 23}, "MN": {"male": 21, "female": 10}, "MI": {"male": 37, "female": 19}, "RI": {"male": 5, "female": 1}, "KS": {"male": 33, "female": 6}, "MT": {"male": 12, "female": 5}, "MS": {"male": 16, "female": 8}, "SC": {"male": 34, "female": 18}, "KY": {"male": 27, "female": 11}, "OR": {"male": 17, "female": 7}, "SD": {"male": 2, "female": 0}}
state_race = {"WA": {"hispanic": 0, "white": 0, "black": 0, "asian": 45}, "DE": {"hispanic": 0, "white": 0, "black": 0, "asian": 36}, "DC": {"hispanic": 0, "white": 0, "black": 0, "asian": 4}, "WI": {"hispanic": 0, "white": 0, "black": 0, "asian": 81}, "WV": {"hispanic": 0, "white": 0, "black": 0, "asian": 19}, "HI": {"hispanic": 0, "white": 0, "black": 0, "asian": 2}, "FL": {"hispanic": 0, "white": 0, "black": 1, "asian": 115}, "WY": {"hispanic": 0, "white": 0, "black": 0, "asian": 4}, "NH": {"hispanic": 0, "white": 0, "black": 0, "asian": 7}, "NJ": {"hispanic": 0, "white": 0, "black": 0, "asian": 87}, "NM": {"hispanic": 0, "white": 0, "black": 0, "asian": 14}, "TX": {"hispanic": 3, "white": 0, "black": 3, "asian": 132}, "LA": {"hispanic": 1, "white": 0, "black": 0, "asian": 45}, "NC": {"hispanic": 0, "white": 0, "black": 1, "asian": 77}, "ND": {"hispanic": 0, "white": 0, "black": 0, "asian": 3}, "NE": {"hispanic": 0, "white": 0, "black": 0, "asian": 12}, "TN": {"hispanic": 0, "white": 1, "black": 0, "asian": 52}, "NY": {"hispanic": 1, "white": 0, "black": 0, "asian": 96}, "PA": {"hispanic": 1, "white": 0, "black": 1, "asian": 198}, "CA": {"hispanic": 30, "white": 5, "black": 6, "asian": 213}, "NV": {"hispanic": 0, "white": 0, "black": 0, "asian": 15}, "VA": {"hispanic": 0, "white": 0, "black": 1, "asian": 64}, "CO": {"hispanic": 1, "white": 1, "black": 0, "asian": 121}, "AK": {"hispanic": 0, "white": 0, "black": 0, "asian": 14}, "AL": {"hispanic": 0, "white": 0, "black": 0, "asian": 53}, "AR": {"hispanic": 0, "white": 0, "black": 0, "asian": 28}, "VT": {"hispanic": 0, "white": 0, "black": 1, "asian": 4}, "IL": {"hispanic": 0, "white": 2, "black": 0, "asian": 130}, "GA": {"hispanic": 0, "white": 4, "black": 1, "asian": 52}, "IN": {"hispanic": 0, "white": 2, "black": 0, "asian": 57}, "IA": {"hispanic": 0, "white": 0, "black": 1, "asian": 26}, "OK": {"hispanic": 0, "white": 0, "black": 0, "asian": 34}, "AZ": {"hispanic": 0, "white": 0, "black": 0, "asian": 39}, "ID": {"hispanic": 0, "white": 1, "black": 0, "asian": 3}, "CT": {"hispanic": 0, "white": 0, "black": 0, "asian": 25}, "ME": {"hispanic": 0, "white": 0, "black": 0, "asian": 9}, "MD": {"hispanic": 0, "white": 0, "black": 0, "asian": 63}, "MA": {"hispanic": 0, "white": 0, "black": 0, "asian": 37}, "OH": {"hispanic": 1, "white": 0, "black": 1, "asian": 101}, "UT": {"hispanic": 0, "white": 0, "black": 0, "asian": 20}, "MO": {"hispanic": 0, "white": 0, "black": 1, "asian": 53}, "MN": {"hispanic": 0, "white": 0, "black": 1, "asian": 30}, "MI": {"hispanic": 0, "white": 0, "black": 2, "asian": 54}, "RI": {"hispanic": 0, "white": 0, "black": 0, "asian": 6}, "KS": {"hispanic": 0, "white": 1, "black": 1, "asian": 37}, "MT": {"hispanic": 0, "white": 0, "black": 0, "asian": 17}, "MS": {"hispanic": 0, "white": 0, "black": 2, "asian": 22}, "SC": {"hispanic": 0, "white": 1, "black": 3, "asian": 48}, "KY": {"hispanic": 1, "white": 0, "black": 1, "asian": 36}, "OR": {"hispanic": 0, "white": 0, "black": 0, "asian": 24}, "SD": {"hispanic": 0, "white": 0, "black": 0, "asian": 2}}
state_age = {"WA": {"41-50": 3, "31-40": 3, "51+": 2, "0-20": 7, "21-30": 7}, "DE": {"41-50": 1, "31-40": 3, "51+": 2, "0-20": 12, "21-30": 8}, "DC": {"41-50": 0, "31-40": 0, "51+": 0, "0-20": 0, "21-30": 0}, "WI": {"41-50": 6, "31-40": 10, "51+": 8, "0-20": 14, "21-30": 18}, "WV": {"41-50": 0, "31-40": 1, "51+": 2, "0-20": 1, "21-30": 4}, "HI": {"41-50": 0, "31-40": 1, "51+": 0, "0-20": 0, "21-30": 0}, "FL": {"41-50": 4, "31-40": 9, "51+": 9, "0-20": 22, "21-30": 22}, "WY": {"41-50": 0, "31-40": 0, "51+": 0, "0-20": 0, "21-30": 2}, "NH": {"41-50": 0, "31-40": 1, "51+": 0, "0-20": 3, "21-30": 0}, "NJ": {"41-50": 1, "31-40": 8, "51+": 7, "0-20": 15, "21-30": 23}, "NM": {"41-50": 0, "31-40": 1, "51+": 0, "0-20": 6, "21-30": 1}, "TX": {"41-50": 8, "31-40": 7, "51+": 6, "0-20": 14, "21-30": 21}, "LA": {"41-50": 1, "31-40": 6, "51+": 0, "0-20": 11, "21-30": 3}, "NC": {"41-50": 3, "31-40": 3, "51+": 3, "0-20": 16, "21-30": 9}, "ND": {"41-50": 1, "31-40": 0, "51+": 0, "0-20": 0, "21-30": 1}, "NE": {"41-50": 0, "31-40": 1, "51+": 0, "0-20": 0, "21-30": 2}, "TN": {"41-50": 1, "31-40": 3, "51+": 1, "0-20": 10, "21-30": 11}, "NY": {"41-50": 5, "31-40": 10, "51+": 5, "0-20": 7, "21-30": 20}, "PA": {"41-50": 10, "31-40": 27, "51+": 7, "0-20": 41, "21-30": 39}, "CA": {"41-50": 11, "31-40": 14, "51+": 5, "0-20": 36, "21-30": 39}, "NV": {"41-50": 1, "31-40": 0, "51+": 0, "0-20": 1, "21-30": 0}, "VA": {"41-50": 6, "31-40": 4, "51+": 3, "0-20": 5, "21-30": 14}, "CO": {"41-50": 0, "31-40": 7, "51+": 4, "0-20": 8, "21-30": 9}, "AK": {"41-50": 1, "31-40": 0, "51+": 0, "0-20": 3, "21-30": 2}, "AL": {"41-50": 3, "31-40": 2, "51+": 2, "0-20": 10, "21-30": 7}, "AR": {"41-50": 0, "31-40": 4, "51+": 1, "0-20": 6, "21-30": 4}, "VT": {"41-50": 0, "31-40": 1, "51+": 1, "0-20": 0, "21-30": 1}, "IL": {"41-50": 1, "31-40": 19, "51+": 6, "0-20": 29, "21-30": 30}, "GA": {"41-50": 2, "31-40": 6, "51+": 3, "0-20": 8, "21-30": 8}, "IN": {"41-50": 0, "31-40": 6, "51+": 4, "0-20": 11, "21-30": 4}, "IA": {"41-50": 1, "31-40": 8, "51+": 0, "0-20": 2, "21-30": 1}, "OK": {"41-50": 0, "31-40": 4, "51+": 1, "0-20": 6, "21-30": 5}, "AZ": {"41-50": 1, "31-40": 1, "51+": 1, "0-20": 13, "21-30": 2}, "ID": {"41-50": 0, "31-40": 3, "51+": 0, "0-20": 0, "21-30": 0}, "CT": {"41-50": 0, "31-40": 1, "51+": 2, "0-20": 5, "21-30": 5}, "ME": {"41-50": 1, "31-40": 0, "51+": 0, "0-20": 0, "21-30": 4}, "MD": {"41-50": 6, "31-40": 3, "51+": 3, "0-20": 8, "21-30": 12}, "MA": {"41-50": 2, "31-40": 2, "51+": 3, "0-20": 5, "21-30": 8}, "OH": {"41-50": 5, "31-40": 11, "51+": 5, "0-20": 12, "21-30": 14}, "UT": {"41-50": 0, "31-40": 5, "51+": 0, "0-20": 1, "21-30": 4}, "MO": {"41-50": 1, "31-40": 3, "51+": 4, "0-20": 12, "21-30": 3}, "MN": {"41-50": 0, "31-40": 3, "51+": 2, "0-20": 3, "21-30": 3}, "MI": {"41-50": 2, "31-40": 2, "51+": 2, "0-20": 8, "21-30": 13}, "RI": {"41-50": 0, "31-40": 0, "51+": 0, "0-20": 0, "21-30": 1}, "KS": {"41-50": 2, "31-40": 3, "51+": 1, "0-20": 10, "21-30": 5}, "MT": {"41-50": 3, "31-40": 2, "51+": 2, "0-20": 0, "21-30": 0}, "MS": {"41-50": 3, "31-40": 1, "51+": 0, "0-20": 1, "21-30": 3}, "SC": {"41-50": 1, "31-40": 4, "51+": 3, "0-20": 6, "21-30": 7}, "KY": {"41-50": 0, "31-40": 4, "51+": 1, "0-20": 6, "21-30": 7}, "OR": {"41-50": 1, "31-40": 4, "51+": 3, "0-20": 5, "21-30": 2}, "SD": {"41-50": 0, "31-40": 0, "51+": 0, "0-20": 1, "21-30": 1}}

function tooltipHtml(n, d){ /* function to create html content string in tooltip div. */
    return "<h4>"+n+"</h4><table>"+
        "<tr><td>Number of Shootings</td><td>"+(d.numShoot)+"</td></tr>"+
        "</table>";
}

var shootList = {"WA": 48, "DE": 29, "DC": 7, "WI": 68, "WV": 19, 
    "HI": 2, "FL": 113, "WY": 3, "NH": 6, "NJ": 80, "NM": 14, "TX": 139, 
    "LA": 44, "NC": 90, "ND": 4, "NE": 12, "TN": 56, "NY": 92, "PA": 191, 
    "CA": 315, "NV": 20, "VA": 58, "CO": 240, "AK": 16, "AL": 54, "AR": 29, 
    "VT": 7, "IL": 101, "GA": 61, "IN": 67, "IA": 30, "OK": 35, "AZ": 35, "ID": 4, 
    "CT": 27, "ME": 8, "MD": 52, "MA": 40, "OH": 105, "UT": 18, "MO": 54, "MN": 34,
        "MI": 58, "RI": 8, "KS": 37, "MT": 17, "MS": 27, "SC": 65, "KY": 36, "OR": 28, "SD": 3}


var stateShooting ={}; /* Sample random data. */   
["AK","AL","AR","AZ","CA","CO","CT","DC",
"DE","FL","GA","HI","IA","ID","IL","IN",
"KS","KY","LA","MA","MD","ME","MI","MN",
"MO","MS","MT","NC","ND","NE","NH","NJ",
"NM","NV","NY","OH","OK","OR","PA","RI",
"SC","SD","TN","TX","UT","VA","VT","WA",
"WI","WV","WY"]
    .forEach(function(d){ 
        //console.log(d)
        //console.log(realShootList[d])
        var x = shootList[d];
        // original colors ("#ffffcc", "#800026")
        stateShooting[d]={numShoot:x, color:d3.interpolate("#ffffcc", "#800026")(x/100)}; 
    });

/* draw states on id #statesvg */   
uStates.draw("#statesvg", stateShooting, tooltipHtml);

d3.select(self.frameElement).style("height", "600px"); 

// DONUT CHART STARTS HERE

// race pie chart
function race_pie_function(asian, white, black, hispanic){
    var race_pie = new d3pie("race_pie", {
        "header": {
            "title": {
                "text": "Shootings in the U.S. by Age",
                "fontSize": 24,
                "font": "open sans"
            }
            // "subtitle": {
            //     "text": "Dare I say, Real Data",
            //     "color": "#999999",
            //     "fontSize": 12,
            //     "font": "open sans"
            // },
            // "titleSubtitlePadding": 10
        },
        "footer": {
            "color": "#999999",
            "fontSize": 10,
            "font": "open sans",
            "location": "bottom-left"
        },
        "size": {
            "canvasWidth": 450,
            "canvasHeight": 450,
            "pieOuterRadius": "70%"
        },
        // "footer": {
        // "text": "Source: www.FakeData.com",
        // "color": "#999999",
        // "fontSize": 10,
        // "font": "open sans",
        // "location": "bottom-left"
        // },
        "data": {
            "sortOrder": "value-desc",
            "content": [
                {
                    "label": "Asian",
                    "value": asian,
                    "color": "#ccb2b2"
                },
                {
                    "label": "White",
                    "value": white,
                    "color": "#ccc8b2"
                },
                {
                    "label": "Black",
                    "value": black,
                    "color": "#c3ccb2"
                },
                {
                    "label": "Hispanic",
                    "value": hispanic,
                    "color": "#b5ccb2"
                }
            ]
        },
        "labels": {
            "outer": {
                "pieDistance": 28
            },
            "inner": {
                "hideWhenLessThanPercentage": 3
            },
            "mainLabel": {
                "fontSize": 11
            },
            "percentage": {
                "color": "#ffffff",
                "decimalPlaces": 0
            },
            "value": {
                "color": "#adadad",
                "fontSize": 11
            },
            "lines": {
                "enabled": true
            },
            "truncation": {
                "enabled": true
            }
        },
        "effects": {
            "pullOutSegmentOnClick": {
                "effect": "linear",
                "speed": 400,
                "size": 9
            }
        },
        "misc": {
            "gradient": {
                "enabled": false,
                "percentage": 100
            }
        },
        "callbacks": {
            "onMouseoverSegment": null,
            "onMouseoutSegment": null,
            "onClickSegment": null
        }
    });
}

// gender pie chart
function gender_pie_function(female, male){
    var gender_pie = new d3pie("gender_pie", {
        "header": {
            "title": {
                "text": "Shootings in the U.S. by Gender",
                "fontSize": 24,
                "font": "open sans"
            }
            // "subtitle": {
            //     "text": "Fake Data",
            //     "color": "#999999",
            //     "fontSize": 12,
            //     "font": "open sans"
            // },
            // "titleSubtitlePadding": 10
        },
        "footer": {
            "color": "#999999",
            "fontSize": 10,
            "font": "open sans",
            "location": "bottom-left"
        },
        "size": {
            "canvasWidth": 450,
            "canvasHeight": 450,
            "pieOuterRadius": "70%"
        },
        // "footer": {
        // "text": "Source: www.FakeData.com",
        // "color": "#999999",
        // "fontSize": 10,
        // "font": "open sans",
        // "location": "bottom-left"
        // },
        "data": {
            "sortOrder": "value-desc",
            "content": [
                {
                    "label": "Female",
                    "value": female,
                    "color": "#ccb2b2"
                },
                {
                    "label": "Male",
                    "value": male,
                    "color": "#ccc8b2"
                },
            ]
        },
        "labels": {
            "outer": {
                "pieDistance": 28
            },
            "inner": {
                "hideWhenLessThanPercentage": 1
            },
            "mainLabel": {
                "fontSize": 11
            },
            "percentage": {
                "color": "#ffffff",
                "decimalPlaces": 0
            },
            "value": {
                "color": "#adadad",
                "fontSize": 11
            },
            "lines": {
                "enabled": true
            },
            "truncation": {
                "enabled": true
            }
        },
        "effects": {
            "pullOutSegmentOnClick": {
                "effect": "linear",
                "speed": 400,
                "size": 9
            }
        },
        "misc": {
            "gradient": {
                "enabled": false,
                "percentage": 100
            }
        },
        "callbacks": {
            "onMouseoverSegment": null,
            "onMouseoutSegment": null,
            "onClickSegment": null
        }
    });
}

// age pie chart
function age_pie_function(teens, twenties, thirties, forties, fifties){
    var age_pie = new d3pie("age_pie", {
        "header": {
            "title": {
                "text": "Shootings in the U.S. by Race",
                "fontSize": 24,
                "font": "open sans"
            }
            // "subtitle": {
            //     "text": "Fake Data",
            //     "color": "#999999",
            //     "fontSize": 12,
            //     "font": "open sans"
            // },
            // "titleSubtitlePadding": 10
        },
        "footer": {
            "color": "#999999",
            "fontSize": 10,
            "font": "open sans",
            "location": "bottom-left"
        },
        "size": {
            "canvasWidth": 450,
            "canvasHeight": 450,
            "pieOuterRadius": "70%"
        },
        // "footer": {
        // "text": "Source: www.FakeData.com",
        // "color": "#999999",
        // "fontSize": 10,
        // "font": "open sans",
        // "location": "bottom-left"
        // },
        "data": {
            "sortOrder": "value-desc",
            "content": [
                {
                    "label": "0-20",
                    "value": teens,
                    "color": "#ccb2b2"
                },
                {
                    "label": "21-30",
                    "value": twenties,
                    "color": "#ccc8b2"
                },
                {
                    "label": "31-40",
                    "value": thirties,
                    "color": "#c3ccb2"
                },
                {
                    "label": "41-50",
                    "value": forties,
                    "color": "#b5ccb2"
                },
                {
                    "label": "51+",
                    "value": fifties,
                    "color": "#b2c2cc"
                }
            ]
        },
        "labels": {
            "outer": {
                "pieDistance": 28
            },
            "inner": {
                "hideWhenLessThanPercentage": 3
            },
            "mainLabel": {
                "fontSize": 11
            },
            "percentage": {
                "color": "#ffffff",
                "decimalPlaces": 0
            },
            "value": {
                "color": "#adadad",
                "fontSize": 11
            },
            "lines": {
                "enabled": true
            },
            "truncation": {
                "enabled": true
            }
        },
        "effects": {
            "pullOutSegmentOnClick": {
                "effect": "linear",
                "speed": 400,
                "size": 9
            }
        },
        "misc": {
            "gradient": {
                "enabled": false,
                "percentage": 100
            }
        },
        "callbacks": {
            "onMouseoverSegment": null,
            "onMouseoutSegment": null,
            "onClickSegment": null
        }
    });
}